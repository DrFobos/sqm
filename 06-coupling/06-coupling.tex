% (The MIT License)
%
% Copyright (c) 2023-2024 Yegor Bugayenko
%
% Permission is hereby granted, free of charge, to any person obtaining a copy
% of this software and associated documentation files (the 'Software'), to deal
% in the Software without restriction, including without limitation the rights
% to use, copy, modify, merge, publish, distribute, sublicense, and/or sell
% copies of the Software, and to permit persons to whom the Software is
% furnished to do so, subject to the following conditions:
%
% The above copyright notice and this permission notice shall be included in all
% copies or substantial portions of the Software.
%
% THE SOFTWARE IS PROVIDED 'AS IS', WITHOUT WARRANTY OF ANY KIND, EXPRESS OR
% IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES OF MERCHANTABILITY,
% FITNESS FOR A PARTICULAR PURPOSE AND NONINFRINGEMENT. IN NO EVENT SHALL THE
% AUTHORS OR COPYRIGHT HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER
% LIABILITY, WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING FROM,
% OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR OTHER DEALINGS IN THE
% SOFTWARE.

\documentclass{article}
\usepackage{../lecture-notes/notes}
\newcommand*\thetitle{Coupling}
\begin{document}

\plush{\lnTitlePage{6}{24}{G0vN6Ah8-js}}

\lnQuote
  [Larry L. Constantine]
  {larry-constantine}
  {The fewer and simpler the connections between modules, the easier it is to \ul{understand} each module without reference to other modules.}
  {stevens1974structured}

\plush{
\pptPic{.8}{coupling.png}\par
{\scriptsize Source: \url{https://www.geeksforgeeks.org/coupling-in-java/}\par}}

\lnQuote
  [Glenford Myers]
  {glenford-myers}
  {Coupling is the measure of the strength of association established by a connection from one module to another. Strong coupling \ul{complicates} a system since a module is harder to \ul{understand}, \ul{change}, or \ul{correct} by itself if it is highly interrelated with other modules. Complexity can be reduced by designing systems with the weakest possible coupling between modules.}
  {stevens1974structured}

\plush{
\pptPic{.8}{coupling-2.png}\par
{\scriptsize Source: \url{https://www.javatpoint.com/software-engineering-coupling-and-cohesion}\par}}

\lnQuote
  [Wayne P. Stevens]
  {wayne-stevens}
  {The degree of coupling established by a particular connection is a function of several factors, and thus it is \ul{difficult to establish} a simple index of coupling. Coupling depends (1)~on how complicated the connection is, (2)~on whether the connection refers to the module itself or something inside it, and (3)~on what is being sent or received.}
  {stevens1974structured}

\plush{
\pptPic{.8}{coupling-3.png}\par
{\scriptsize Source: \url{https://nordicapis.com/the-difference-between-tight-coupling-and-loose-coupling/}\par}}

\lnQuote
  {david-west}
  {Collaborations always involve some degree of coupling between both parties of the collaboration, so the \ul{number of collaborations} should be minimized to the greatest extent possible.}
  {west2004object}

\lnQuote
  {robert-martin}
  {The lack of coupling means that the elements of our system are \ul{better isolated} from each other and from change. This isolation makes it easier to \ul{understand} each element of the system.}
  {martin2008clean}

\lnQuote
  [Steve Freeman]
  {steve-freeman}
  {Elements are coupled if a change in one \ul{forces} a change in the other. Loosely coupled features are easier to \ul{maintain}.}
  {freeman2009growing}

\lnQuote
  {../06-coupling/cbo}
  {\ul{Coupling Between Objects (CBO)} --- for a class is a count of the number of other classes to which it is coupled.}
  {chidamber1994metrics}

\lnQuote
  {../06-coupling/dcc}
  {\ul{Direct Class Coupling (DCC)} --- this metric is a count of the different number of classes that a class is directly related to. The metric includes classes that are directly related by attribute declarations and message passing (parameters) in methods.}
  {bansiya2002}

\lnQuote
  [Martin Fowler]
  {martin-fowler}
  {The biggest problems come from uncontrolled coupling at the \ul{upper levels}. I don't worry about the number of modules coupled together, but I look at the pattern of \ul{dependency relationship} between the modules.}
  {fowler2001}

\lnQuote
  [Steve McConnell]
  {steve-mcconnell}
  {Low-to-medium \ul{fan-out} means having a given class use a low-to-medium number of other classes. High fan-out (more than about seven) indicates that a class uses a large number of other classes and may therefore be overly complex. High \ul{fan-in} refers to having a high number of classes that use a given class. High fan-in implies that a system has been designed to make good use of utility classes at the lower levels in the system.}
  {mcconnell2004code}

\plush{
\pptPic{.95}{kokash.png}\par
{\scriptsize (c) Natalia Kokash, Leiden Institute of Advanced Computer Science\par}}

% \lnPitch{\pptQuote{study.png}{We also found evidence of certain `key' classes (with both high fan-in and fan-out) and `client' and `server'-type classes with just high fan-out and fan-in, respectively.}{A. Mubarak et al., \textit{An Evolutionary Study of Fan-in and Fan-out Metrics in OSS}, Proceedings of the 4th International Conference on Research Challenges in Information Science (RCIS), 2010}}

\lnQuote
  {../06-coupling/study}
  {We also found evidence of certain `key' classes (with both high fan-in and fan-out) and `client' and `server'-type classes with just high fan-out and fan-in, respectively.}
  {mubarak2010}

\lnPitch{Fan-out, as a metric, is supported by a few tools:
\begin{itemize}
\item \href{https://checkstyle.sourceforge.io/apidocs/com/puppycrawl/tools/checkstyle/checks/metrics/ClassFanOutComplexityCheck.html}{Checkstyle} for Java
\item \href{https://github.com/sarnold/cccc}{CCCC} for C++, C, and Java
\item \href{https://pypi.org/project/module-coupling-metrics/}{module-coupling-metrics} for Python
\item \href{https://github.com/Skarlso/effrit}{effrit} for Go
\item \href{https://github.com/terryyin/lizard}{lizard} for JavaScript, C\#, TypeScript, Lua, Rust, etc.
\end{itemize}}

\lnQuote
  [Derek Comartin]
  {derek-comartin}
  {Afferent coupling (denoted by \textbf{\textsf{Ca}}) is a metric that indicates the total number of other projects/boundaries that are dependent upon it. Efferent coupling (denoted by \textbf{\textsf{Ce}}) is another metric that is the verse of Afferent Coupling. It is the total number of projects that a given project depends on. Instability another metric that is a ratio: $\textbf{\textsf{I}} = \textbf{\textsf{Ce}} / (\textbf{\textsf{Ce}} + \textbf{\textsf{Ca}}).$ This metric is a ratio between 0 and 1. With 0 meaning it's totally stable and 1 meaning it's unstable.}
  {comartin2021}

\plush{
  \pptBanner{Types of Coupling (some of them)}
  \begin{pptWide}{2}
  \scriptsize\begin{itemize}
  \item \ul{Content Coupling} is when one module modifies or relies on the internal workings of another module (e.g., accessing local data of another module).
  \item \ul{Global Coupling} is when two modules share the same global data (e.g., a global variable).
  \item \ul{External Coupling} occurs when two modules share an externally imposed data format, communication protocol, or device interface.
  \item \ul{Control Coupling} is one module controlling the flow of another, by passing it information on what to do (e.g., passing a what-to-do flag).
  \item \ul{Stamp Coupling} is when modules share a composite data structure and use only a part of it, possibly a different part (e.g., passing a whole record to a function that only needs one field of it).
  \item \ul{Data Coupling} is when modules share data through, for example, parameters. Each datum is an elementary piece, and these are the only data shared (e.g., passing an integer to a function that computes a square root).
  \item \ul{Message Coupling} can be achieved by state decentralization (as in objects) and component communication is done via parameters or message passing (see Message passing).
  \item \ul{Subclass Coupling} describes the relationship between a child and its parent. The child is connected to its parent, but the parent isn't connected to the child.
  \item \ul{Temporal Coupling} is when two actions are bundled together into one module just because they happen to occur at the same time.
  \end{itemize}
  \end{pptWide}
  {\scriptsize Source: \url{https://wiki.edunitas.com/IT/en/114-10/Coupling-(computer-programming)_1430_eduNitas.html}\par}}

\pptBanner{Fear of Decoupling}
\begin{multicols}{2}
{\scriptsize\begin{ffcode}
interface Money {
  double cents();
}

void send(Money m) {
  double c = m.cents();
  // Send them over via the API...
}

class OneDollar implements Money {
  @Override
  double cents() {
    return 100.0d;
  }
}
\end{ffcode}
}
\par\columnbreak\par
{\scriptsize\begin{ffcode}
class EmployeeHourlyRate
  implements Money {
  @Override
  double cents() {
    // Fetch the exchange rate;
    // Update the database;
    // Calculate the hourly rate;
    // Return the value.
\end{ffcode}
}
\par
``Polymorphism makes sofware more fragile ... to make it robust!''\par
\lnSource{bugayenko2018blog0918}
\end{multicols}
\plush{}

\pptBanner{Temporal Coupling}
\begin{multicols}{2}
Tight coupling (\textcolor{red}{not good}):\par
{\small\begin{ffcode}
List<String> list =
  new LinkedList<>();
Foo.append(list, "Jeff");
Foo.append(list, "Walter");
return list;
\end{ffcode}
}
\par\columnbreak\par
Loose coupling (\textcolor{green}{good}):\par
{\small\begin{ffcode}
return Foo.with(
  Foo.with(
    new LinkedList<>(),
    "Jeff"
  ),
  "Walter"
);
\end{ffcode}
}
\end{multicols}\par
\lnSource{bugayenko2015blog1208}
\plush{}

\pptBanner{Distance of Coupling}
\begin{multicols}{2}
{\scriptsize\begin{ffcode}
class Temperature {
  private int t;
  public String toString() {
    return String.format("%d F", this.t);
  }
}

Temperature x = new Temperature();
String txt = x.toString();
String[] parts = txt.split(" ");
int t = Integer.parseInt(parts[0]);
\end{ffcode}
}
\par\columnbreak\par
``The larger the number, the worse the design: in good design we are not supposed to take something out of a method and then do some complex processing. The \ul{distance metric} will tell us how many times, and by how much, we violated the principle of loose coupling.''\par
\lnSource{bugayenko2020blog1027}
\end{multicols}
\plush{}

\end{document}
